language: node_js
node_js: 8
cache:
  yarn: true
  directories:
  - node_modules
  - "${NVM_PATH}_modules"
install:
- yarn
- cd functions && yarn && cd ..
script:
- yarn lint
- echo "Building..."
- if [ "$TRAVIS_BRANCH" == "develop" ]; then yarn build; fi
- if [ "$TRAVIS_BRANCH" == "master" ]; then yarn build:prod; fi
before_deploy:
- echo "Deploying!"
deploy:
- provider: firebase
  skip_cleanup: true
  on:
    branch: master
  project: gdg-sydney-devfest2018
  token:
    secure: VwoAKwkmDA2mDaEqzR5vhASq2tcwrC30ckJYp7xAkTXFBxvtYP/OoJ0Tp71077sLbtpjICE6iuOw1kB7EEZj8C4G6m1SKBKGS0/ZEQrlHmN1oG6qSmLvduwLZSXww3y6niPxWt2s7+e+ryBT6/6UQTm8E5IXQYDiuB4UOhJbyEm3EB/sUnQc+vD8yeM8yh7KBYfo8FV4VBmlZU6k/jIjb2hl5dXJaqpdORzUUyYt4KyF2gNJZ/g7KH2jHJd+j3C01aluVoC0A2WtTTPY3RpXuPHGm9GTm0y80MI0jiTPSpg7jPL/v6WsqcbrRXJ+eTQWAtwE65Opntgnfm5EjLKHVdPCXXrLAw8ZL06Y9U20AFjTaXyHJBm/WK5strS0Tgafqajhsc8X8iCYX+XMQ4o9wmtIaRHrHY5pw3JPjnhVlPLlqECgRywoZE8SXpedFQ+EsKxGLkjPTZcixaRHkbirpejdEt6/aOU/smVMbmJOP57uDOexyxz4c5mz6lyqT/4x5ok10A+eml/2+2LGJcS5TynMP/+xrpHqgvjIJCENjs/3ONPzJw+9lstXV9h26ssUdg3tKTR69ORqlsWN1pIzYtr2efMNnnL3Zc1znZgcrzmeQAJbxv8LgBl8Q3rqUmJSOPOsIZUUuSelLS/mqF/R4I97sH84iRheI3AOOCZlV4Q=
- provider: firebase
  skip_cleanup: true
  on:
    branch: develop
  project: test-gdg-sydney-devfest2018
  token:
    secure: VwoAKwkmDA2mDaEqzR5vhASq2tcwrC30ckJYp7xAkTXFBxvtYP/OoJ0Tp71077sLbtpjICE6iuOw1kB7EEZj8C4G6m1SKBKGS0/ZEQrlHmN1oG6qSmLvduwLZSXww3y6niPxWt2s7+e+ryBT6/6UQTm8E5IXQYDiuB4UOhJbyEm3EB/sUnQc+vD8yeM8yh7KBYfo8FV4VBmlZU6k/jIjb2hl5dXJaqpdORzUUyYt4KyF2gNJZ/g7KH2jHJd+j3C01aluVoC0A2WtTTPY3RpXuPHGm9GTm0y80MI0jiTPSpg7jPL/v6WsqcbrRXJ+eTQWAtwE65Opntgnfm5EjLKHVdPCXXrLAw8ZL06Y9U20AFjTaXyHJBm/WK5strS0Tgafqajhsc8X8iCYX+XMQ4o9wmtIaRHrHY5pw3JPjnhVlPLlqECgRywoZE8SXpedFQ+EsKxGLkjPTZcixaRHkbirpejdEt6/aOU/smVMbmJOP57uDOexyxz4c5mz6lyqT/4x5ok10A+eml/2+2LGJcS5TynMP/+xrpHqgvjIJCENjs/3ONPzJw+9lstXV9h26ssUdg3tKTR69ORqlsWN1pIzYtr2efMNnnL3Zc1znZgcrzmeQAJbxv8LgBl8Q3rqUmJSOPOsIZUUuSelLS/mqF/R4I97sH84iRheI3AOOCZlV4Q=
env:
  global:
    secure: VwoAKwkmDA2mDaEqzR5vhASq2tcwrC30ckJYp7xAkTXFBxvtYP/OoJ0Tp71077sLbtpjICE6iuOw1kB7EEZj8C4G6m1SKBKGS0/ZEQrlHmN1oG6qSmLvduwLZSXww3y6niPxWt2s7+e+ryBT6/6UQTm8E5IXQYDiuB4UOhJbyEm3EB/sUnQc+vD8yeM8yh7KBYfo8FV4VBmlZU6k/jIjb2hl5dXJaqpdORzUUyYt4KyF2gNJZ/g7KH2jHJd+j3C01aluVoC0A2WtTTPY3RpXuPHGm9GTm0y80MI0jiTPSpg7jPL/v6WsqcbrRXJ+eTQWAtwE65Opntgnfm5EjLKHVdPCXXrLAw8ZL06Y9U20AFjTaXyHJBm/WK5strS0Tgafqajhsc8X8iCYX+XMQ4o9wmtIaRHrHY5pw3JPjnhVlPLlqECgRywoZE8SXpedFQ+EsKxGLkjPTZcixaRHkbirpejdEt6/aOU/smVMbmJOP57uDOexyxz4c5mz6lyqT/4x5ok10A+eml/2+2LGJcS5TynMP/+xrpHqgvjIJCENjs/3ONPzJw+9lstXV9h26ssUdg3tKTR69ORqlsWN1pIzYtr2efMNnnL3Zc1znZgcrzmeQAJbxv8LgBl8Q3rqUmJSOPOsIZUUuSelLS/mqF/R4I97sH84iRheI3AOOCZlV4Q=
