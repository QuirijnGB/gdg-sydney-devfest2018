language: node_js
node_js: 8
cache:
  yarn: true
  directories:
  - node_modules
  - "${NVM_PATH}_modules"
install:
- yarn
- cd functions && yarn && cd ..
script:
- yarn lint
- echo "Building..."
- if [ "$TRAVIS_BRANCH" == "develop" ]; then yarn build; fi
- if [ "$TRAVIS_BRANCH" == "master" ]; then yarn build:prod; fi
before_deploy:
- echo "Deploying!"
deploy:
- provider: firebase
  skip_cleanup: true
  on:
    branch: master
  project: gdg-sydney-devfest2018
  token:
    secure: jRTL8NUBRlnFa5+yoQDYknZT02yV3MZjx+C1yW/O2+4VHIZEVnusNGRQj7ueTI3REhXqjkoUFmsf/TZV1rKIU1+KQyQa9sa9v2n6Wf5r60mHmwC8xDCqzuAuJQu3Wg6gB4PlHwEM660MgWpy80ucPrPELIAUWnm7qHSmCNqYjg/LNb8TEcGJttiOKvwv7athsflYy+cr8bLywiCi98+L2CZULgpC9LcrBxVGGFn7b3XYoEe9Ptxxhy/toEZNL5IznD0GQ9JHFgQVS1BBOmEna+9TXvwwbuxWODBVWeLDQagZMc9rfPpd7W1TFy5VVdEX3JTcC+VBklF6qNx6Q3JPKhhczmobAEQ5I2heIRnQJ0J4mvjDwve74cCBLC1U9KW30VsyPkVSe6b5iC5yqY7iFmwbnGO4xPDhXzAPtrRGWSFxwJS/UjSt/1gnlZRk33e88N/peyK0DgX29qRtkDpPjHca07BSIJwkSB/ASSpqbGho9LI/MROYX7TiFpSHPEIGht+YMKVUBEWpoI48RooF8ddleJpPjfFlz+nkIG///hrYENJhGdlewW1eOaOlQOeNtZadF5pUZ4URKTD47Hivg2VOnGm/euK1F3mWusF/Hah2uPzr9g7gUCzNASknkh97BGLhAz6iBjBeV9JY/y0KjyvLikkb3+GYjZxi+jqnVG4=
- provider: firebase
  skip_cleanup: true
  on:
    branch: develop
  project: test-gdg-sydney-devfest2018
  token:
    secure: jRTL8NUBRlnFa5+yoQDYknZT02yV3MZjx+C1yW/O2+4VHIZEVnusNGRQj7ueTI3REhXqjkoUFmsf/TZV1rKIU1+KQyQa9sa9v2n6Wf5r60mHmwC8xDCqzuAuJQu3Wg6gB4PlHwEM660MgWpy80ucPrPELIAUWnm7qHSmCNqYjg/LNb8TEcGJttiOKvwv7athsflYy+cr8bLywiCi98+L2CZULgpC9LcrBxVGGFn7b3XYoEe9Ptxxhy/toEZNL5IznD0GQ9JHFgQVS1BBOmEna+9TXvwwbuxWODBVWeLDQagZMc9rfPpd7W1TFy5VVdEX3JTcC+VBklF6qNx6Q3JPKhhczmobAEQ5I2heIRnQJ0J4mvjDwve74cCBLC1U9KW30VsyPkVSe6b5iC5yqY7iFmwbnGO4xPDhXzAPtrRGWSFxwJS/UjSt/1gnlZRk33e88N/peyK0DgX29qRtkDpPjHca07BSIJwkSB/ASSpqbGho9LI/MROYX7TiFpSHPEIGht+YMKVUBEWpoI48RooF8ddleJpPjfFlz+nkIG///hrYENJhGdlewW1eOaOlQOeNtZadF5pUZ4URKTD47Hivg2VOnGm/euK1F3mWusF/Hah2uPzr9g7gUCzNASknkh97BGLhAz6iBjBeV9JY/y0KjyvLikkb3+GYjZxi+jqnVG4=
env:
  global:
    secure: jRTL8NUBRlnFa5+yoQDYknZT02yV3MZjx+C1yW/O2+4VHIZEVnusNGRQj7ueTI3REhXqjkoUFmsf/TZV1rKIU1+KQyQa9sa9v2n6Wf5r60mHmwC8xDCqzuAuJQu3Wg6gB4PlHwEM660MgWpy80ucPrPELIAUWnm7qHSmCNqYjg/LNb8TEcGJttiOKvwv7athsflYy+cr8bLywiCi98+L2CZULgpC9LcrBxVGGFn7b3XYoEe9Ptxxhy/toEZNL5IznD0GQ9JHFgQVS1BBOmEna+9TXvwwbuxWODBVWeLDQagZMc9rfPpd7W1TFy5VVdEX3JTcC+VBklF6qNx6Q3JPKhhczmobAEQ5I2heIRnQJ0J4mvjDwve74cCBLC1U9KW30VsyPkVSe6b5iC5yqY7iFmwbnGO4xPDhXzAPtrRGWSFxwJS/UjSt/1gnlZRk33e88N/peyK0DgX29qRtkDpPjHca07BSIJwkSB/ASSpqbGho9LI/MROYX7TiFpSHPEIGht+YMKVUBEWpoI48RooF8ddleJpPjfFlz+nkIG///hrYENJhGdlewW1eOaOlQOeNtZadF5pUZ4URKTD47Hivg2VOnGm/euK1F3mWusF/Hah2uPzr9g7gUCzNASknkh97BGLhAz6iBjBeV9JY/y0KjyvLikkb3+GYjZxi+jqnVG4=
